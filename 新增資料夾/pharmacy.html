<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>臺北市藥局地圖</title>
    <!-- leaflet -->
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.8.0/dist/leaflet.css"
      integrity="sha512-hoalWLoI8r4UszCkZ5kL8vayOGVae1oxXe/2A4AO6J9+580uKHDO3JdHb7NzwwzK5xr/Fs0W40kiNHxM9vyTtQ=="
      crossorigin=""
    />
    <script
      src="https://unpkg.com/leaflet@1.8.0/dist/leaflet.js"
      integrity="sha512-BB3hKbKWOc9Ez/TAwyWxNXeoV9c1v6FIeYiBieIWkpLjauysF18NzgR1MBNBXf8/KABdlkX68nAhlwcDFLGPCQ=="
      crossorigin=""
    ></script>

    <!-- jquery -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <!-- bootstrap -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.0.2/css/bootstrap.min.css"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.2.0/js/bootstrap.min.js"></script>
    <!-- css -->
    <link rel="stylesheet" href="./assets/css/style.css" />
  </head>
  <body>
    <div class="container">
      <div class="row">
        <div class="col-md-2">
          <div class="towns">
            <label for="towns">區：</label>
            <select id="towns" onchange="townSelect()">
              <option value="" selected>請選擇一區</option>
              <option value="大同區">大同區</option>
              <option value="中山區">中山區</option>
              <option value="松山區">松山區</option>
              <option value="大安區">大安區</option>
              <option value="中正區">中正區</option>
              <option value="萬華區">萬華區</option>
              <option value="信義區">信義區</option>
              <option value="士林區">士林區</option>
              <option value="北投區">北投區</option>
              <option value="內湖區">內湖區</option>
              <option value="南港區">南港區</option>
              <option value="文山區">文山區</option>
            </select>
          </div>
          <div class="ListBlock">
            <div class="ListBlockscroll"></div>
          </div>
        </div>
        <div class="col-md-10">
          <div id="map"></div>
        </div>
      </div>
    </div>
    <div id="pharmacyTemplate" style="display: none">
      <div class="panel panel-default">
        <div class="panel-heading">
          <h3 class="panel-title">藥局名稱</h3>
        </div>
        <div class="panel-body">
          <strong>電話</strong>: <span class="phone">3</span><br />
          <strong>地址</strong>: <span class="address">Warren, MI</span>
          <hr />
          <button
            class="btn btn-secondary btn-sm btn-location"
            type="button"
            data-id="0"
          >
            Location
          </button>
        </div>
      </div>
    </div>

    <script>
      var mymap = L.map('map', { zoomControl: true }).setView(
        [25.068807, 121.545525],
        12,
      );
      L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png').addTo(mymap);

      function pointToLayer(feature, latlng) {
        console.log(feature);
        return L.marker(latlng);
      }

      // 引入資料
      var myData = L.layerGroup([]);

      $.getJSON(
        'https://raw.githubusercontent.com/kennethhutw/leaflet_tutorial/master/json/taipei.json',
        function (data) {
          myData.addLayer(
            L.geoJSON(data['features'], {
              pointToLayer: pointToLayer,
            }).addTo(mymap),
          );
        },
      );

      myData.addTo(mymap);
    </script>
  </body>
</html>
